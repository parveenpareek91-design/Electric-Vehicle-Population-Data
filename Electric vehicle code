import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
df = pd.read_csv("//content/Electric_Vehicle_Population_Data.csv")
df.isnull().sum()
df["Electric Range"] = df["Electric Range"].replace(0, np.nan)
df["Electric Range"] = df["Electric Range"].fillna(df["Electric Range"].median()
)
df.isnull().sum()
df.duplicated().sum()
df["VIN_id"] = df["VIN (1-10)"].astype("category").cat.codes
df[["longitude", "latitude"]] = df["Vehicle Location"].str.replace("POINT \\(|\\)", "", regex=True).str.split(" ", expand=True).astype(float)
df["Make"].value_counts().head(5)
df["Model"].value_counts().head(5)
df['County'].value_counts().head(5)
df['Model Year'].value_counts().sort_index()
df['Electric Range'].mean()
(df["Clean Alternative Fuel Vehicle (CAFV) Eligibility"]
 .value_counts(normalize=True) * 100)
df.groupby("Make")["Electric Range"].mean().sort_values(ascending=False)
df.groupby("Model")["Electric Range"].mean().sort_values(ascending=False)
top_makes = df["Make"].value_counts().head(5)

plt.figure(figsize=(6,4))
sns.barplot(x=top_makes.index, y=top_makes.values)
plt.title("Top 5 EV Makes by Count")
plt.xlabel("Make")
plt.ylabel("Number of Vehicles")
plt.xticks(rotation=45)
plt.show()

top_models = df["Model"].value_counts().head(5)

plt.figure(figsize=(6,4))
sns.barplot(x=top_models.index, y=top_models.values)
plt.title("Top 5 EV Models by Count")
plt.xlabel("Model")
plt.ylabel("Number of Vehicles")
plt.xticks(rotation=90)
plt.show()
county_counts = df["County"].value_counts().reset_index()
county_counts.columns = ["County", "EV_Count"]
county_pivot = county_counts.set_index("County")
plt.figure(figsize=(6,10))
sns.heatmap(
    county_pivot,
    cmap="YlOrRd",
    cbar=True
)
plt.title("EV Distribution by County")
plt.xlabel("EV Count")
plt.ylabel("County")
plt.show()
model_year_counts = df["Model Year"].value_counts().sort_index()
sns.lineplot(x=model_year_counts.index, y=model_year_counts.values)
plt.title("EV Adoption by Model Year")
plt.xlabel("Model Year")
plt.ylabel("Number of Vehicles")
plt.show()
plt.figure(figsize=(6,4))
sns.scatterplot(
    x="Electric Range",
    y="Base MSRP",
    data=df
)
plt.title("Electric Range vs Base MSRP")
plt.xlabel("Electric Range (miles)")
plt.ylabel("Base MSRP")
plt.show()
cafv_counts = df["Clean Alternative Fuel Vehicle (CAFV) Eligibility"].value_counts()
!pip install folium
import folium
# Create base map (centered roughly on Washington state)
ev_map = folium.Map(location=[47.5, -122.3], zoom_start=7)
for _, row in df.dropna(subset=["latitude", "longitude"]).iterrows():
    folium.CircleMarker(
        location=[row["latitude"], row["longitude"]],
        radius=2,
        color="blue",
        fill=True,
        fill_opacity=0.6
    ).add_to(ev_map)
    ev_map
